<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>–ó–∞–¥–∞–Ω–∏–µ 2.4</title>
	<link rel="stylesheet" type="text/css" href="taskstyle.css">
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC" rel="stylesheet">
	<style>
		#win{
			width: 600px;
			height: 300px;
			border: solid 2px #382d28;
			margin: auto;
			margin-bottom: 10px;
			background-color: #73524a;
			font-family: Helvetica, Arial, sans-serif;
			font-stretch: condensed;
			font-size: 1.2em;
			color:#efe2d4;
		}
		select {
			background-color: #73524a;
			font-stretch: condensed;
			font-size: 1em;
			color:#efe2d4;
			border:solid 2px;

		}
		option {
			font-size: 0.9em;
		}
		#par {
			text-align: left;
			width: 600px;
			margin: auto;
		}
		#hamb {
			height: 100%;
			width: 50%;
			position:relative;
			padding-bottom:200px;
		}
		#hamb,#filling,#spma {
			float:left;
			box-sizing: border-box;
			padding-top: 15px;

		}
		#filling,#spma {
			height: 50%;
			width: 50%;
			padding:5px;
			padding-top: 15px;
			text-align: left;
		}
		.fopt {
			margin-left: 0px;
			margin-top: 10px;	
		}
		#small {
			display: none;
		}
		label {
			display: block;
		}
		.hpic {
			font-family: font-family: 'Noto Sans TC', sans-serif;
			line-height: 1;
			bottom: 85px;
			padding: 0px;
			width: 100%;
			position: absolute;
			font-size: 135px;
			text-align: center;
		}
		.sm {
			font-size: 100px;
		}
		#hamb p {
			position: absolute;
			left: 50%;
			bottom: 20px;
			width: 200px;
			margin-left: -100px;
		}
		.ra {
			box-sizing: border-box;
			border: solid 1px;
			min-height: 100px;
			padding: 10px;
		}

	</style>
</head>
<body>
<div id = "form">
	<h2>–ó–∞–¥–∞–Ω–∏–µ 3.4</h2>
	<p>3.4. –°–µ—Ç—å —Ñ–∞—Å—Ç—Ñ—É–¥–æ–≤</p>
	<br>

	<form id="win">
		<div id="hamb">
			<select id="menu">
		  		<option>–ë–æ–ª—å—à–æ–π</option>
		  		<option>–ú–∞–ª–µ–Ω—å–∫–∏–π</option>
			</select>
			<div id="big">
				<div class="hpic">üçî</div>
				<p>–ë–æ–ª—å—à–æ–π –≥–∞–º–±—É—Ä–≥–µ—Ä<br>(100 ‚ÇÆ, 40 –∫–∫–∞–ª)</p>
			</div>
			<div id="small">
				<div class="hpic sm">üçî</div>
				<p>–ú–∞–ª–µ–Ω—å–∫–∏–π –≥–∞–º–±—É—Ä–≥–µ—Ä <br>(50 ‚ÇÆ, 20 –∫–∫–∞–ª)</p>
			</div>
		</div>
		<div id="filling">
			<div>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—á–∏–Ω–∫—É:</div>
			<label><input type="radio" class="fopt" name="fill" value="cheese" checked>—Å—ã—Ä (+ 10 ‚ÇÆ, + 20 –∫–∫–∞–ª)</label>
			<label><input type="radio" class="fopt" name="fill" value="salad">—Å–∞–ª–∞—Ç (+ 20 ‚ÇÆ, + 5 –∫–∫–∞–ª)</label>
			<label><input type="radio" class="fopt" name="fill" value="potato">–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å (+ 15 ‚ÇÆ, + 10 –∫–∫–∞–ª)</label>
		</div></p>
		<div id="spma">
			<div>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</div>
			<label><input type="checkbox" name="sp" class="fopt" value="spice">–ø–æ—Å—ã–ø–∞—Ç—å –ø—Ä–∏–ø—Ä–∞–≤–æ–π (+ 15 ‚ÇÆ, 0 –∫–∫–∞–ª)</label>
			<label><input type="checkbox" name="sp" class="fopt" value="mayo">–ø–æ–ª–∏—Ç—å –º–∞–π–æ–Ω–µ–∑–æ–º (+ 20 ‚ÇÆ, + 5 –∫–∫–∞–ª)</label>
		</div>
	</form>
	<input type="button" id="btn" value="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–∞–∫–∞–∑">
	<p id = "par"></p>
</div>
<script>
function hambType() {
	switch(this.value) {
		case "–ë–æ–ª—å—à–æ–π": {
			big.style.display = "block";
			small.style.display = "none";
			ht = "big";
			break;
		}
		case "–ú–∞–ª–µ–Ω—å–∫–∏–π": {
			big.style.display = "none";
			small.style.display = "block";
			ht = "small";
			break;
		}
	}
	console.log(order);
}
var ht = "big";

var components = {
	big:{calories:40,price:100, toString:()=>{return "–ë–æ–ª—å—à–æ–π –≥–∞–º–±—É—Ä–≥–µ—Ä"}},
	small:{calories:20,price:50,toString:()=>{return "–ú–∞–ª–µ–Ω—å–∫–∏–π –≥–∞–º–±—É—Ä–≥–µ—Ä"}},
	cheese:{calories:20,price:10, toString:()=>{return "—Å—ã—Ä–æ–º"}},
	salad:{calories:5,price:20, toString:()=>{return "—Å–∞–ª–∞—Ç–æ–º"}},
	potato:{calories:10,price:15, toString:()=>{return "–∫–∞—Ä—Ç–æ—Ñ–µ–ª–µ–º"}},
	spice:{calories:0,price:15, toString:()=>{return "—Å–ø–µ—Ü–∏—è–º–∏"}},
	mayo:{calories:5,price:20, toString:()=>{return "–º–∞–π–æ–Ω–µ–∑–æ–º"}},
}
function makeOrder() {
	order.hambType = components[ht];
	order.price = order.hambType.price;
	order.calories = order.hambType.calories;
	message = `<b>–í–∞—à –∑–∞–∫–∞–∑:</b><br> ${order.hambType} c `;
	for(elem of fllist) {
		if(elem.checked) {
			order.filling = components[elem.value];
			message += order.filling;
			order.price += order.filling.price;
			order.calories += order.filling.calories;
		}
	}
	order.extra = [];
	for(elem of cklist) {
		if(elem.checked) {
			order.extra.push(components[elem.value]);
			message += `, ${components[elem.value]}`;
			order.price += components[elem.value].price;
			order.calories += components[elem.value].calories;
		}
	}
	var rep = " –∏";
	par.classList.add("ra");
	message = message.replace(/,([^,]*)$/,rep+'$1');
	message += `.<br>–ö–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å: ${order.calories} –∫–∫–∞–ª.<br>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ: ${order.price} ‚ÇÆ.`
	order.price = order.hambType.price + order.filling.price;
	par.innerHTML = message;
}

var order = {hambType:components[ht]};
var menu = document.getElementById("menu");
var fllist = document.getElementsByName("fill");
var cklist = document.getElementsByName("sp");

menu.onchange = hambType;
btn = document.getElementById("btn");
btn.onclick = makeOrder;

//btn.addEventListener("click", num, false);

</script>
</body>
</html>